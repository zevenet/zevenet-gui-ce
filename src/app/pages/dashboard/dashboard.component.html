<!--
  * @license
  * Zevenet Software License
  * This file is part of the Zevenet Load Balancer software.
  *
  * Copyright (C) 2019-today ZEVENET SL, Sevilla (Spain)
  * Licensed under the terms of the GNU Affero General Public License.
  * See License.txt in the project root for license information.
-->

<div class="row">
  <div class="col-3">
    <nb-card *ngIf="news">
      <nb-card-header>
        <span translate >DASHBOARD.professional_products.title</span>
      </nb-card-header>
      <nb-card-body [innerHTML]="news[0] | safeHtml">
      </nb-card-body>
    </nb-card>
  </div>
  <div class="col-3">
    <nb-card *ngIf="news">
      <nb-card-header>
        <span translate>DASHBOARD.professional_services.title</span>
      </nb-card-header>
      <nb-card-body [innerHTML]="news[1] | safeHtml">
      </nb-card-body>
    </nb-card>
  </div>
  <div class="col-3">  
    <nb-card *ngIf="news">
      <nb-card-header>
        <span translate>DASHBOARD.news.title</span>
      </nb-card-header>
      <nb-card-body [innerHTML]="news[2] | safeHtml" class="d-flex flex-column">
      </nb-card-body>
    </nb-card>
  </div>
  <div class="col-3">  
    <nb-card *ngIf="news">
      <nb-card-header>
        <span translate >DASHBOARD.resources.title</span>
      </nb-card-header>
      <nb-card-body [innerHTML]="news[3] | safeHtml">
      </nb-card-body>
    </nb-card>
  </div>  
</div>
<div class="row" *ngIf="stats">
  <div class="col-4">    
    <nb-card>
      <nb-card-header>
        <span translate >DASHBOARD.system_stats.title</span>
      </nb-card-header>
      <nb-card-body>
        <div class="pb-4">
          <div class="d-flex justify-content-between">
            <span translate >DASHBOARD.system_stats.cpu</span>
            <span>{{stats.cpu.usage}} / 100 %</span>
          </div>
            <ngb-progressbar type="success" [value]="stats.cpu.usage" [max]="100"></ngb-progressbar>
        </div>
        <div class="pb-4">
          <div class="d-flex justify-content-between">
            <span translate >DASHBOARD.system_stats.memory</span>
            <span>{{stats.memory.MemUsed}} / {{stats.memory.MemTotal}} Mb</span>
          </div>
          <ngb-progressbar type="success" [value]="stats.memory.MemUsed" [max]="stats.memory.MemTotal"></ngb-progressbar>
        </div>
        <div class="pb-4">
          <div class="d-flex justify-content-between">
            <span translate >DASHBOARD.system_stats.load</span>
            <span>{{stats.load.Last_1}} / {{stats.cpu.cores}} {{'DASHBOARD.system_stats.cores' | translate}}</span>
          </div>
          <ngb-progressbar type="success" [value]="stats.load.Last_1" [max]="stats.cpu.cores"></ngb-progressbar>
        </div> 
      </nb-card-body>
    </nb-card>
  </div>
  <div class="col-4">        
    <nb-card>
      <nb-card-header>
        <span translate >DASHBOARD.system_information.title</span>
      </nb-card-header>
      <nb-card-body *ngIf="info">
        <ul class="line-height-30">
          <li>{{'DASHBOARD.system_information.zevenet_version' | translate}}: <strong>{{info.zevenet_version}}</strong></li>
          <li>{{'DASHBOARD.system_information.appliance_version' | translate}}: <strong>{{info.appliance_version}}</strong></li>
          <li>{{'DASHBOARD.system_information.kernel_version' | translate}}: <strong>{{info.kernel_version}}</strong></li>
          <li>{{'DASHBOARD.system_information.hostname' | translate}}: <strong>{{info.hostname}}</strong></li>
          <li>{{'DASHBOARD.system_information.system_date' | translate}}: <strong>{{info.system_date}}</strong></li>
        </ul>
      </nb-card-body>
    </nb-card>
  </div>
  <div class="col-4">    
    <nb-card>
      <nb-card-header>
        <span translate >DASHBOARD.nic_interfaces.title</span>
      </nb-card-header>
      <nb-card-body *ngIf="info">
        <ngx-charts-bar-vertical-2d [results]="interfaces" [xAxis]="true" [yAxis]="true" [showYAxisLabel]="true" yAxisLabel="Megabytes (MB)" [view]="['450', '180']" [showGridLines]="false" [scheme]="colorScheme" ></ngx-charts-bar-vertical-2d>
      </nb-card-body>
    </nb-card> 
  </div>
</div>
<nb-card class="h-auto">
  <nb-card-header>
    <span translate >DASHBOARD.farm_list.title</span>
  </nb-card-header>

  <nb-card-body *ngIf="farms">
    <zevenet-table [data]="farms" [cols]="columns" [editButton]="false" [createButton]="false" keySort="farmname" object="farm"></zevenet-table>    
  </nb-card-body>
</nb-card>
